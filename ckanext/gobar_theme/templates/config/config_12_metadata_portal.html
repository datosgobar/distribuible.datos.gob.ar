{% extends "config/config_base.html" %}
{% block config %}
    <h1>Metadatos del portal</h1>

    <form method="post" action="" data-module="basic-form" accept-charset="utf-8" enctype="multipart/form-data">

        <h2>URL del portal (recomendado)</h2>
        <p>Ingresá el dominio del sitio del portal.</p>
        {% set homepage = h.get_theme_config('portal-metadata.homepage') %}
        <input name="metadata-homepage" class="url-field" type="text" title="URL del portal" placeholder="ej: www.tusitio.com" value="{{ homepage if homepage else '' }}">

        <h2>Identificador (recomendado)</h2>
        <p>El identificador debe contener una o más palabras en minúsculas, separadas con guiones medios, sin usar caracteres especiales.
            Identifica en forma breve, sucinta y declarativa al nodo.</p>
        {% set id = h.get_theme_config('portal-metadata.id') %}
        <input name="metadata-id" type="text" title="Identificador" placeholder="ej: MinModernizacion" value="{{ id if id else '' }}">

        <h2 name="launch_date_h2">Fecha de lanzamiento (recomendado)</h2>
        {% set launch_date = h.get_theme_config('portal-metadata.launch_date') %}
        <div class="control-group">
            <table class="date-picker" data-dates="{{ h.get_pkg_extra(data, 'dateRange') }}">
                <tr>
                    <td>
                        <label class="picker-date-from">
                            <input name="metadata-launch_date" type="text" title="Fecha de lanzamiento" id="date-from" placeholder="DD/MM/AAAA"
                                   value="{{ launch_date if launch_date else '' }}"></label>
                    </td>
                </tr>
            </table>
        </div>

        <h2>Idioma del portal (recomendado)</h2>
        {% set languages = [{"name":"Abkhaz","code":"abk"},{"name":"Afar","code":"aar"},{"name":"Africanos","code":"afr"},{"name":"Akan","code":"aka"},{"name":"Albania","code":"sqi"},{"name":"Amárico","code":"amh"},{"name":"Árabe","code":"ara"},{"name":"Aragonés","code":"arg"},{"name":"Armenio","code":"hye"},{"name":"Assamese","code":"asm"},{"name":"Avaric","code":"ava"},{"name":"Avestan","code":"ave"},{"name":"Aymara","code":"aym"},{"name":"Azerbaiyán","code":"aze"},{"name":"Bambara","code":"bam"},{"name":"Bashkir","code":"bak"},{"name":"Vasco","code":"eus"},{"name":"Belarús","code":"bel"},{"name":"Bengalí","code":"ben"},{"name":"Bihari","code":"bih"},{"name":"Bislama","code":"bis"},{"name":"Bosnia","code":"bos"},{"name":"Breton","code":"bre"},{"name":"Búlgaro","code":"bul"},{"name":"Burmese","code":"mya"},{"name":"Catalán","code":"cat"},{"name":"Chamorro","code":"cha"},{"name":"Chechenio","code":"che"},{"name":"Chichewa, Chewa, Nyanja","code":"nya"},{"name":"Chino","code":"zho"},{"name":"Chuvashia","code":"chv"},{"name":"Cornualles","code":"cor"},{"name":"Corso","code":"cos"},{"name":"Cree","code":"cre"},{"name":"Croacia","code":"hrv"},{"name":"Checo","code":"ces"},{"name":"Danés","code":"dan"},{"name":"Divehi, Dhivehi, Maldivas","code":"div"},{"name":"Holandés","code":"nld"},{"name":"Dzongkha","code":"dzo"},{"name":"Inglés","code":"eng"},{"name":"Esperanto","code":"epo"},{"name":"Estonia","code":"est"},{"name":"Ewe","code":"ewe"},{"name":"Faroese","code":"fao"},{"name":"Fiji","code":"fij"},{"name":"Finlandés","code":"fin"},{"name":"Francés","code":"fra"},{"name":"Fula, Fulah, Pulaar, Pular","code":"ful"},{"name":"Galicia","code":"glg"},{"name":"Georgiano","code":"kat"},{"name":"Alemán","code":"deu"},{"name":"Griego Moderno","code":"ell"},{"name":"Guaraní","code":"grn"},{"name":"Gujarati","code":"guj"},{"name":"Haitiano, creole haitiano","code":"hat"},{"name":"Hausa","code":"hau"},{"name":"Hebreo (moderno)","code":"heb"},{"name":"Herero","code":"her"},{"name":"Hindi","code":"hin"},{"name":"Hiri Motu","code":"hmo"},{"name":"Húngaro","code":"hun"},{"name":"Interlingua","code":"ina"},{"name":"Indonesio","code":"ind"},{"name":"Interlingue","code":"ile"},{"name":"Irlanda","code":"gle"},{"name":"Igbo","code":"ibo"},{"name":"Inupiaq","code":"ipk"},{"name":"Ido","code":"ido"},{"name":"Islandés","code":"isl"},{"name":"Italiano","code":"ita"},{"name":"Inuktitut","code":"iku"},{"name":"Japonés","code":"jpn"},{"name":"Javanés","code":"jav"},{"name":"Kalaallisut, Groenlandia","code":"kal"},{"name":"Canarés","code":"kan"},{"name":"Kanuri","code":"kau"},{"name":"Cachemira","code":"kas"},{"name":"Kazajstán","code":"kaz"},{"name":"Khmer","code":"khm"},{"name":"Kikuyu, Gikuyu","code":"kik"},{"name":"Kinyarwanda","code":"kin"},{"name":"Kirguises, Kirguistán","code":"kir"},{"name":"Komi","code":"kom"},{"name":"Kongo","code":"kon"},{"name":"Corea","code":"kor"},{"name":"Kurdo","code":"kur"},{"name":"Kwanyama, Kuanyama","code":"kua"},{"name":"Latin","code":"lat"},{"name":"Luxemburgués, Luxemburgués","code":"ltz"},{"name":"Luganda","code":"lug"},{"name":"Limburgués, Limburgan, Limburger","code":"lim"},{"name":"Lingala","code":"lin"},{"name":"Lao","code":"lao"},{"name":"Lituano","code":"lit"},{"name":"Luba-Katanga","code":"lub"},{"name":"Letonia","code":"lav"},{"name":"Manx","code":"glv"},{"name":"Macedonia","code":"mkd"},{"name":"Madagascar","code":"mlg"},{"name":"Malayo","code":"msa"},{"name":"Malayalam","code":"mal"},{"name":"Maltés","code":"mlt"},{"name":"Māori","code":"mri"},{"name":"Maratí (Marathi)","code":"mar"},{"name":"De las Islas Marshall","code":"mah"},{"name":"Mongolia","code":"mon"},{"name":"Nauru","code":"nau"},{"name":"Navajo, Navaho","code":"nav"},{"name":"Noruego Bokmål","code":"nob"},{"name":"Ndebele del Norte","code":"nde"},{"name":"Nepali","code":"nep"},{"name":"Ndonga","code":"ndo"},{"name":"Noruego Nynorsk","code":"nno"},{"name":"Noruego","code":"nor"},{"name":"Nuosu","code":"iii"},{"name":"Ndebele del sur","code":"nbl"},{"name":"Occitano","code":"oci"},{"name":"Ojibwe, Ojibwa","code":"oji"},{"name":"Antiguo eslavo eclesiástico, Iglesia eslava, eslavo eclesiástico, antiguo Búlgaro, Esclavo viejo","code":"chu"},{"name":"Oromo","code":"orm"},{"name":"Oriya","code":"ori"},{"name":"Osetia del Sur, osetio","code":"oss"},{"name":"Panjabi, Punjabi","code":"pan"},{"name":"Pāli","code":"pli"},{"name":"Persa","code":"fas"},{"name":"Polaco","code":"pol"},{"name":"Pashto, Pushto","code":"pus"},{"name":"Portugués","code":"por"},{"name":"Quechua","code":"que"},{"name":"Romanche","code":"roh"},{"name":"Kirundi","code":"run"},{"name":"Rumania, Moldavia, Moldavan","code":"ron"},{"name":"Ruso","code":"rus"},{"name":"Sánscrito (samskrta)","code":"san"},{"name":"Sardo","code":"srd"},{"name":"Sindhi","code":"snd"},{"name":"Sami del norte","code":"sme"},{"name":"Samoa","code":"smo"},{"name":"Sango","code":"sag"},{"name":"Serbio","code":"srp"},{"name":"Gaélico escocés, gaélico","code":"gla"},{"name":"Shona","code":"sna"},{"name":"Cingalés, singalés","code":"sin"},{"name":"Eslovaca","code":"slk"},{"name":"Esloveno","code":"slv"},{"name":"Somalí","code":"som"},{"name":"Southern Sotho","code":"sot"},{"name":"Español, castellano","code":"spa"},{"name":"Sundanese","code":"sun"},{"name":"Swahili","code":"swa"},{"name":"Swati","code":"ssw"},{"name":"Sueco","code":"swe"},{"name":"Tamil","code":"tam"},{"name":"Telugu","code":"tel"},{"name":"Tayikistán","code":"tgk"},{"name":"Tailandia","code":"tha"},{"name":"Tigrinya","code":"tir"},{"name":"Tibetano estándar, Tibetano, Central","code":"bod"},{"name":"Turkmenistán","code":"tuk"},{"name":"Tagalo","code":"tgl"},{"name":"Tswana","code":"tsn"},{"name":"Tonga (Islas Tonga)","code":"ton"},{"name":"Turco","code":"tur"},{"name":"Tsonga","code":"tso"},{"name":"Tártara","code":"tat"},{"name":"Twi","code":"twi"},{"name":"Tahitian","code":"tah"},{"name":"Uighur, Uyghur","code":"uig"},{"name":"Ucrania","code":"ukr"},{"name":"Urdu","code":"urd"},{"name":"Uzbeko","code":"uzb"},{"name":"Venda","code":"ven"},{"name":"Vietnamita","code":"vie"},{"name":"Volapük","code":"vol"},{"name":"Valonia","code":"wln"},{"name":"Galés","code":"cym"},{"name":"Wolof","code":"wol"},{"name":"Oeste de Frisia","code":"fry"},{"name":"Xhosa","code":"xho"},{"name":"Yiddish","code":"yid"},{"name":"Yoruba","code":"yor"},{"name":"Zhuang, Chuang","code":"zha"},{"name":"Zulu","code":"zul"}] %}
        {% set selected_languages = h.get_theme_config('portal-metadata.languages') or [] %}
        <select id="portal-languages" data-module="autocomplete" multiple="multiple" name="metadata-languages" style="margin-bottom: 30px; width: 100%;">
            {% for language in languages %}
                <option value="{{ language.code }}" {{ 'selected' if language.code in selected_languages }}>{{ language.name }}</option>
            {% endfor %}
        </select>

        <h2>Licencia (recomendado)</h2>
        <select class="form-control" id="portal-license" name="metadata-license" style="margin-bottom: 30px;">
            {% set existing_license_id = h.get_theme_config('portal-metadata.license') %}
            {% for license in h.license_options(existing_license_id) %}
                <option value="{{ license.id }}" {{ 'selected' if h.id_belongs_to_license(existing_license_id, license) or ("CC-BY-4.0" == license.id and not existing_license_id) }}>{{ license.title }}</option>
            {% endfor %}
        </select>

        <h2>Otras condiciones de la licencia (opcional)</h2>
        {% set licence_conditions = h.get_theme_config('portal-metadata.licence_conditions') %}
        <input name="metadata-licence_conditions" type="text" title="Condiciones Licencia"
               placeholder="Ingresá las condiciones aquí" value="{{ licence_conditions if licence_conditions else '' }}">

        <h2>Cobertura geográfica (opcional)</h2>
        <p>Ingresá cuál es el alcance geográfico del portal.</p>

        <h4 style="margin-left: 10px;">País</h4>

        {% set selected_country = h.get_theme_config('portal-metadata.country') %}
        <input id="country-field" value="{{ selected_country }}" name="metadata-country" style="margin-bottom: 30px; width: 100%" />

        <div class="internal">
            <h4 class="from-country" style="margin-left: 10px;">Provincia</h4>
            {% set selected_province = h.get_theme_config('portal-metadata.province') %} {# provincia traída de la configuración #}
            <input id="province-field" value="{{ selected_province }}" name="metadata-province" style="margin-bottom: 30px; width: 100%;" />

            <h4 class="from-country" style="margin-left: 10px;">Municipio</h4>
            {% set selected_districts = h.get_theme_config('portal-metadata.districts') or '' %} {# municipio(s) traído(s) de la configuración #}
            <input id="district-field" value="{{ selected_districts }}" name="metadata-municipio"
                        multiple="multiple" style="margin-bottom: 50px; width: 100%;" />
        </div>

        {% set last_updated = h.get_theme_config('portal-metadata.last_updated') %}

        <h2>Versión del portal: {{ h.portal_andino_version() }} - Última modificación: {{ last_updated }}</h2>

        <div class="submit-container">
            <button id="submit-metadata-portal" class="submit-button" type="submit" name="save">GUARDAR</button>
        </div>
    </form>

    {% resource 'gobar_js/libs/bootstrap-datepicker.js' %}
    {% resource 'gobar_js/config/metadata_actions.js' %}
    {% resource 'gobar_js/forms/autovalidations/urls.js' %}
    {% resource 'gobar_js/spatial.js' %}

{% endblock -%}